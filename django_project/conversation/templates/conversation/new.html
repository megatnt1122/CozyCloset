{% extends 'core/base.html' %}

{% block title %}New conversation{% endblock %}

{% block content %}

<h1 class="mb-6 text-3xl">New Conversation</h1>

<form method="post" action=".">
    {% csrf_token %}
    
    <div class="space-y-4">
        {{ form.as_p }}
    </div>

    {% if form.errors or form.non_field_errors %}
        <div class="mb-3 p-6 bg-red-100 rounded-xl">
            {% for field in form %}
                {{ field.errors }}
            {% endfor %}

            {{ form.non_field_errors }}
        </div>
    {% endif %}

    <div>
        <h2 class="text-lg font-bold mb-2">Quick Replies</h2>
        <div class="flex flex-wrap">
            <button type="button" class="predefined-message-btn mr-3 mb-3 py-2 px-4 bg-gray-200 hover:bg-gray-300 rounded-xl" onclick="populateContent('Hi, I\'m interested in this item.')">Hi, I'm interested in this item.</button>
            <button type="button" class="predefined-message-btn mr-3 mb-3 py-2 px-4 bg-gray-200 hover:bg-gray-300 rounded-xl" onclick="populateContent('Hi, would you be willing to negotiate?')">Hi, would you be willing to negotiate?</button>
            <button type="button" class="predefined-message-btn mr-3 mb-3 py-2 px-4 bg-gray-200 hover:bg-gray-300 rounded-xl" onclick="populateContent('Could I buy this item from you?')">Could I buy this item from you?</button>
        </div>
    </div>

    <button class="mt-6 py-4 px-8 text-lg bg-red-400 hover:bg-red-500 rounded-xl text-white">Send</button>
</form>

<script>
    function populateContent(message) {
        document.getElementById('id_content').value = message;
    }
</script>

{% endblock %}