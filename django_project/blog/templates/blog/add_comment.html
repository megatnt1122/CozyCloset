{% extends "blog/base.html" %}
{% block title %}Comment On Blog Post{% endblock %}
{% block content %}

<style>
  .comments-section {
    margin-top: 1rem;
    padding: 20px;
  }

  .comment {
    background-color: #f8f9fa;
    border: 1px solid #ced4da;
    border-radius: 10px;
    padding: 20px;
    margin-bottom: 20px;
    transition: box-shadow 0.3s;
  }

  .comment:hover {
    box-shadow: 0px 0px 10px 0px rgba(0,0,0,0.1);
  }

  .comment-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .comment-header strong {
    font-size: 20px;
    font-weight: bold;
    color: #343a40;
  }

  .comment-header .like-button {
    background: none;
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    padding: 8px 16px;
    border-radius: 5px;
    font-size: 14px;
    font-weight: bold;
    background-color: #007bff;
    color: white;
    transition: background-color 0.3s;
  }

  .comment-header .like-button:hover {
    background-color: #0056b3;
  }

  .comment-header img {
    width: 20px;
    height: 20px;
    margin-left: 5px;
  }

  .comment-header span {
    font-size: 14px;
    color: #666;
  }

  .comment-body {
    color: #555;
    font-size: 14px;
    margin-top: 10px;
  }

  .form-group {
    background-color: #fff;
    padding: 20px;
    border-radius: 4px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    margin-top: 20px;
  }

  input[type="text"],
  textarea {
    width: 100%;
    margin-top: 5px;
    margin-bottom: 10px;
    border: 1px solid #ccc;
    border-radius: 4px;
    padding: 10px;
  }

  .post {
    background-color: #007bff;
    color: white;
    padding: 10px 15px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    transition: background-color 0.2s;
  }

  .post:hover {
    background-color: #0056b3;
  }
  
  /* Sort button settings */
  .switch-view-btn {
        padding: 0.1rem 0.5rem;
        font-size: 1rem;
        line-height: 1.5;
        border-radius: 0.25rem;
        background-color: #007bff;
        color: white;
        border: none;
        cursor: pointer;
        transition: background-color 0.15s ease-in-out;
        margin-left: 20px; /* Apply consistently or adjust as needed */
   }

   .switch-view-btn:hover {
       background-color: #0056b3;
   }

   .btn-group {
       display: flex;
       justify-content: center;
   }

   /* Content visibility */
   .content {
       display: none;
   }

   .content.active {
       display: block;
   }
	
</style>
<div id="newestSort" class="content active">
	Sort by<button type="button" class="switch-view-btn" onclick="switchView()">Oldest First</button>
	<div class="comments-section">
		<h2>Comments...</h2>
		{% if not comments %}
			<p>No Comments Yet...</p>
		{% else %}
			{% for comment in comments|dictsortreversed:"date_added" %}
				<div class="comment">
					<div class="comment-header">
						<strong>{{ comment.name }} - {{ comment.date_added }}</strong>
						<div>
							<a href="{% url 'comment_like' comment.id %}">
								<button class="like-button">
									{{ comment.liked }}
									<img src="https://cdn-icons-png.flaticon.com/512/126/126473.png" alt="Like button">
								</button>
							</a>
							<span>Likes: {{ comment.likes.count }}</span>
						</div>
					</div>
					<div class="comment-body">
						{{ comment.body }}
					</div>
				</div>
			{% endfor %}
		{% endif %}
	</div>

	<div class="form-group">
		<form method="POST">
			{% csrf_token %}
			{{ form.as_p }}
			<button type="submit" class="post">Add Comment</button>
		</form>
	</div>
</div>

<!-- Alternative View (View 2) -->
<style>
  .comments-section {
    margin-top: 1rem;
    padding: 20px;
  }

  .comment {
    background-color: #f8f9fa;
    border: 1px solid #ced4da;
    border-radius: 10px;
    padding: 20px;
    margin-bottom: 20px;
    transition: box-shadow 0.3s;
  }

  .comment:hover {
    box-shadow: 0px 0px 10px 0px rgba(0,0,0,0.1);
  }

  .comment-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .comment-header strong {
    font-size: 20px;
    font-weight: bold;
    color: #343a40;
  }

  .comment-header .like-button {
    background: none;
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    padding: 8px 16px;
    border-radius: 5px;
    font-size: 14px;
    font-weight: bold;
    background-color: #007bff;
    color: white;
    transition: background-color 0.3s;
  }

  .comment-header .like-button:hover {
    background-color: #0056b3;
  }

  .comment-header img {
    width: 20px;
    height: 20px;
    margin-left: 5px;
  }

  .comment-header span {
    font-size: 14px;
    color: #666;
  }

  .comment-body {
    color: #555;
    font-size: 14px;
    margin-top: 10px;
  }

  .form-group {
    background-color: #fff;
    padding: 20px;
    border-radius: 4px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    margin-top: 20px;
  }

  input[type="text"],
  textarea {
    width: 100%;
    margin-top: 5px;
    margin-bottom: 10px;
    border: 1px solid #ccc;
    border-radius: 4px;
    padding: 10px;
  }

  .post {
    background-color: #007bff;
    color: white;
    padding: 10px 15px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    transition: background-color 0.2s;
  }

  .post:hover {
    background-color: #0056b3;
  }
  
  /* Sort button settings */
  .switch-view-btn {
        padding: 0.1rem 0.5rem;
        font-size: 1rem;
        line-height: 1.5;
        border-radius: 0.25rem;
        background-color: #007bff;
        color: white;
        border: none;
        cursor: pointer;
        transition: background-color 0.15s ease-in-out;
        margin-left: 20px; /* Apply consistently or adjust as needed */
    }

   .switch-view-btn:hover {
       background-color: #0056b3;
   }

   .btn-group {
       display: flex;
       justify-content: center;
   }

   /* Content visibility */
   .content {
       display: none;
   }

   .content.active {
       display: block;
   }
	
</style>
<div id="oldestSort" class="content">
	<div class="comments-section">
		<h2>Comments...</h2>
		{% if not comments %}
			<p>No Comments Yet...</p>
		{% else %}
			{% for comment in comments|dictsort:"date_added" %}
				<div class="comment">
					<div class="comment-header">
						<strong>{{ comment.name }} - {{ comment.date_added }}</strong>
						<div>
							<a href="{% url 'comment_like' comment.id %}">
								<button class="like-button">
									{{ comment.liked }}
									<img src="https://cdn-icons-png.flaticon.com/512/126/126473.png" alt="Like button">
								</button>
							</a>
							<span>Likes: {{ comment.likes.count }}</span>
						</div>
					</div>
					<div class="comment-body">
						{{ comment.body }}
					</div>
				</div>
			{% endfor %}
		{% endif %}
	</div>

	<div class="form-group">
		<form method="POST">
			{% csrf_token %}
			{{ form.as_p }}
			<button type="submit" class="post">Add Comment</button>
		</form>
	</div>
</div>

<script>
    function switchView() {
        var newestSort = document.getElementById('newestSort');
        var oldestSort = document.getElementById('oldestSort');
        
        if (newestSort.classList.contains('active')) {
            newestSort.classList.remove('active');
            oldestSort.classList.add('active');
        } else {
            newestSort.classList.add('active');
            oldestSort.classList.remove('active');
        }
    }
</script>
{% endblock %}
